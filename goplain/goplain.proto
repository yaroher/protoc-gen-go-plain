syntax = "proto3";

option go_package = "github.com/yaroher/protoc-gen-go-plain/goplain";

package goplain;

import "google/protobuf/descriptor.proto";
import "google/protobuf/type.proto";

message GoIdent {
    string name = 1;
    string import_path = 2;
}

message OverrideSelector {
    optional string target_full_path = 1;
    // from google.protobuf.Field
    optional google.protobuf.Field.Kind field_kind = 2;
    optional google.protobuf.Field.Cardinality field_cardinality = 3;
    optional string field_type_url = 4;
}

message TypeOverride {
    OverrideSelector selector = 1;
    GoIdent target_go_type = 2;
}

message MessageOptions {
    bool generate = 1;
}

message FileOptions {
    repeated TypeOverride go_types_overrides = 1;
}

extend google.protobuf.FileOptions {
    FileOptions file = 60000;
}

extend google.protobuf.MessageOptions {
    MessageOptions message = 60000;
}

message FieldOptions {
    GoIdent override_type = 1;
}

extend google.protobuf.FieldOptions {
    FieldOptions field = 60000;
}